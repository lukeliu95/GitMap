# 项目全景鸟瞰

## 一句话介绍

**「花在哪里了」** 是一款 AI 驱动的智能记账与消费健康助手。用户只需拍照上传购物小票，AI 就能自动识别消费信息，提供营养评估、消费对比和个性化财务建议。

---

## 核心价值主张

```mermaid
flowchart LR
    A[用户痛点] --> B[我们的解决方案]
    B --> C[用户收益]
    
    A1[手动记账<br/>费时费力] --> B1[AI自动识别<br/>拍照即记账]
    A2[忘记消费内容<br/>无法复盘] --> B2[永久保存<br/>随时回顾]
    A3[不清楚<br/>钱花在哪] --> B3[多维度报表<br/>一目了然]
    A4[缺乏<br/>健康意识] --> B4[营养分析<br/>健康提醒]
    
    B1 --> C1[节省90%<br/>记账时间]
    B2 --> C2[数据资产<br/>永久保存]
    B3 --> C3[消费洞察<br/>省钱建议]
    B4 --> C4[健康生活<br/>从吃开始]
    
    style A fill:#ffcccc
    style C fill:#ccffcc
    style B fill:#ffffcc
```

> **图注**：上图展示了用户的核心痛点如何通过「花在哪里了」得到解决，并最终获得实际收益。核心价值在于用 AI 自动化替代繁琐的手动记账过程。

---

## 产品功能全景图

```mermaid
mindmap
  root((花在哪里了))
    用户账户
      注册/登录
      JWT认证
      个人数据隔离
    
    小票管理
      拍照识别
        摄像头拍摄
        相册多选
        批量上传
      AI解析
        OCR文字识别
        商家信息提取
        日期/金额识别
        商品明细提取
      消费分析
        营养健康评估
        近3天消费对比
      重复检测
        基于日期去重
        防止重复录入
    
    统计报表
      周报
        本周消费趋势
        营养摄入分析
        省钱建议
      月报
        月度消费总结
        消费类别分布
        异常支出提醒
      全部数据
        历史累计消费
        长期趋势分析
      报告持久化
        自动生成保存
        手动刷新更新
    
    数据安全
      用户数据隔离
      云端/本地双存储
      报告加密存储
```

> **图注**：思维导图展示了产品的四大核心模块：账户系统、小票管理、统计报表和数据安全。每个模块下又细分具体功能点。

---

## 适合人群与使用场景

### 目标用户画像

| 用户类型 | 特征 | 使用场景 | 核心价值 |
|---------|------|---------|---------|
| **年轻上班族** | 忙碌、注重效率 | 午休后拍一张午餐小票，AI自动生成消费记录和健康分析 | 3秒记账，了解每顿饭的营养摄入 |
| **家庭主妇/主夫** | 管理家庭开支 | 周末采购后批量上传多张超市小票 | 自动生成周报，清楚家庭食品开销和健康饮食情况 |
| **健康意识人群** | 关注饮食健康 | 记录每餐消费，追踪营养成分 | 获得个性化的营养分析和健康建议 |
| **理财新手** | 想控制开支但不善记账 | 定期查看月报，了解消费趋势 | 用数据驱动消费决策，找到省钱空间 |

### 典型使用场景

**场景一：午餐记账**（单张小票）

> 小李中午在便利店买了一份便当，吃完后打开 App，点击拍照按钮，对着小票拍了一张照。2秒后，App 显示识别结果：7-Eleven、¥28.5、购买内容包含照烧鸡肉饭、绿茶。同时还显示了一条分析："这顿饭热量适中，蛋白质摄入良好，但蔬菜比例偏低。与最近3天午餐相比，今天的花费低15%。"

**场景二：周末采购**（批量上传）

> 王女士周六去超市大采购，买了满满一车东西。回家后她打开 App，从相册选择了6张小票照片，App 开始批量处理。5分钟后，所有小票都识别完成，系统自动去重（有一张和上周重复），生成了一份周报："本周食品支出 ¥486，比上周增加12%，主要增加了生鲜采购。营养分析显示本周蔬菜摄入充足，建议继续保持。"

**场景三：月底复盘**（查看报表）

> 月底小张想复盘这个月的开销，切换到"统计"标签，选择"月报"，系统显示："本月共消费 ¥3,240，其中餐饮占比45%、日用品30%、零食15%。发现你有3天晚餐花费超过¥80，建议控制在¥50以内可以每月节省¥300+。"

---

## 技术栈概览

```mermaid
flowchart TB
    subgraph 前端["前端层 (React 19)"]
        A1[Vite构建工具]
        A2[TailwindCSS样式]
        A3[Framer Motion动画]
        A4[Zustand状态管理]
        A5[Recharts图表]
    end
    
    subgraph 后端["后端层 (Node.js + Express)"]
        B1[Express服务器]
        B2[JWT认证]
        B3[API路由]
    end
    
    subgraph AI["AI层 (Gemini 3 Flash)"]
        C1[OCR文字识别]
        C2[消费分析生成]
        C3[报告撰写]
    end
    
    subgraph 数据["数据层"]
        D1[SQLite/libSQL<br/>本地开发]
        D2[Turso云端<br/>生产环境]
    end
    
    subgraph 部署["部署层 (Vercel)"]
        E1[CDN静态资源]
        E2[Serverless Functions]
    end
    
    前端 --> 后端
    后端 --> AI
    后端 --> 数据
    前端 --> 部署
    后端 --> 部署
```

> **图注**：架构图展示了系统的五层结构。前端采用现代化的 React 技术栈，后端使用轻量级 Express，AI 能力由 Google Gemini 提供，数据存储根据环境自动切换，部署在 Vercel 平台。

---

## 核心数据流转

```mermaid
sequenceDiagram
    actor U as 用户
    participant A as App前端
    participant S as 后端API
    participant G as Gemini AI
    participant DB as 数据库
    
    U->>A: 1. 拍摄/选择小票照片
    A->>S: 2. 上传图片(base64)
    S->>DB: 3. 保存原始图片
    S-->>A: 4. 返回receipt ID
    
    A->>S: 5. 请求处理(OCR+分析)
    S->>G: 6. 调用Gemini识别图片
    G-->>S: 7. 返回结构化数据
    
    S->>DB: 8. 查询最近3天消费记录
    DB-->>S: 9. 返回历史数据
    
    S->>G: 10. 请求生成分析报告
    G-->>S: 11. 返回分析文本
    
    S->>DB: 12. 保存分析结果
    S-->>A: 13. 返回完整receipt数据
    A->>U: 14. 展示结果和分析
```

> **图注**：时序图展示了单张小票从上传到展示结果的完整数据流转过程。涉及4个系统组件，14个步骤，整个过程通常在3-5秒内完成。

---

## 产品差异化优势

与传统记账 App 相比，「花在哪里了」的独特价值：

| 维度 | 传统记账App | 花在哪里了 |
|------|------------|-----------|
| **记账方式** | 手动输入商家、金额、分类 | 拍照即可，AI自动识别 |
| **消费分析** | 仅展示金额统计 | 营养健康+消费趋势双维度 |
| **数据颗粒度** | 只记总金额 | 记录每个商品明细 |
| **健康关联** | 无 | AI营养评估，关注饮食健康 |
| **使用门槛** | 需要坚持和自律 | 几乎零门槛，拍照就完成 |

---

## 下一步阅读建议

- 📖 **[01-用户旅程地图](01-user-journey.md)** — 了解用户如何一步步使用产品
- 📖 **[02-核心功能详解](02-core-features.md)** — 深入了解每个功能的运作机制
- 📖 **[03-数据关系图](03-data-model.md)** — 查看系统如何组织和存储数据
