# æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

## åŠŸèƒ½ä¸€ï¼šbrainstormingï¼ˆå¤´è„‘é£æš´è®¾è®¡ï¼‰

### åŠŸèƒ½æ¦‚è¿°

brainstorming æ˜¯ Superpowers å·¥ä½œæµçš„èµ·ç‚¹ï¼Œå¼ºåˆ¶åœ¨ä»»ä½•åˆ›é€ æ€§å·¥ä½œä¹‹å‰æ‰§è¡Œã€‚å®ƒé€šè¿‡è‹æ ¼æ‹‰åº•å¼æé—®æ¾„æ¸…éœ€æ±‚ï¼Œæ¢ç´¢å¤šç§æ–¹æ¡ˆï¼Œåˆ†ç« èŠ‚å‘ˆç°è®¾è®¡ï¼Œç¡®ä¿ç”¨æˆ·æ‰¹å‡†åæ‰è¿›å…¥å®ç°é˜¶æ®µã€‚

### å·¥ä½œæµç¨‹

```mermaid
flowchart TD
    A[ç”¨æˆ·è¾“å…¥å¼€å‘éœ€æ±‚] --> B[è§¦å‘ brainstorming æŠ€èƒ½]
    B --> C[åŠ è½½ SKILL.md]
    
    C --> D[æ¢ç´¢é¡¹ç›®ä¸Šä¸‹æ–‡]
    D --> E[æ£€æŸ¥ç°æœ‰æ¶æ„]
    D --> F[è¯»å–ç›¸å…³ä»£ç ]
    D --> G[æŸ¥çœ‹æœ€è¿‘æäº¤]
    
    E --> H[éœ€æ±‚æ¾„æ¸…é˜¶æ®µ]
    F --> H
    G --> H
    
    H --> I{ç†è§£éœ€æ±‚?}
    I -->|å¦| J[æé—®1]
    J --> K[ç­‰å¾…å›ç­”]
    K --> L[æé—®2]
    L --> M[ç­‰å¾…å›ç­”]
    M --> N[...æ›´å¤šæé—®]
    I -->|æ˜¯| O[è¿›å…¥æ–¹æ¡ˆæ¢ç´¢]
    N --> O
    
    O --> P[æå‡ºæ–¹æ¡ˆA]
    O --> Q[æå‡ºæ–¹æ¡ˆB]
    O --> R[æå‡ºæ–¹æ¡ˆC]
    
    P --> S[åˆ†æåˆ©å¼Š]
    Q --> S
    R --> S
    
    S --> T[æ¨èæœ€ä½³æ–¹æ¡ˆ]
    
    T --> U[ç”¨æˆ·é€‰æ‹©æ–¹æ¡ˆ]
    
    U --> V[åˆ†ç« èŠ‚å‘ˆç°è®¾è®¡]
    V --> W[ç« èŠ‚1ï¼šæ¶æ„]
    V --> X[ç« èŠ‚2ï¼šæ•°æ®æ¨¡å‹]
    V --> Y[ç« èŠ‚3ï¼šAPIè®¾è®¡]
    V --> Z[ç« èŠ‚4ï¼šé”™è¯¯å¤„ç†]
    
    W --> AA{ç”¨æˆ·ç¡®è®¤?}
    AA -->|å¦| AB[ä¿®è®¢ç« èŠ‚1]
    AB --> W
    AA -->|æ˜¯| AC[å±•ç¤ºç« èŠ‚2]
    
    AC --> AD{ç”¨æˆ·ç¡®è®¤?}
    AD -->|å¦| AE[ä¿®è®¢ç« èŠ‚2]
    AE --> AC
    AD -->|æ˜¯| AF[å±•ç¤ºç« èŠ‚3]
    
    AF --> AG{ç”¨æˆ·ç¡®è®¤?}
    AG -->|å¦| AH[ä¿®è®¢ç« èŠ‚3]
    AH --> AF
    AG -->|æ˜¯| AI[å±•ç¤ºç« èŠ‚4]
    
    AI --> AJ{ç”¨æˆ·ç¡®è®¤?}
    AJ -->|å¦| AK[ä¿®è®¢ç« èŠ‚4]
    AK --> AI
    AJ -->|æ˜¯| AL[è®¾è®¡å®Œæˆ]
    
    AL --> AM[ä¿å­˜ design.md]
    AM --> AN[è§¦å‘ writing-plans]
    
    style AL fill:#c8e6c9
```

> **å›¾æ³¨**ï¼šæµç¨‹å›¾å±•ç¤ºäº† brainstorming çš„å®Œæ•´æµç¨‹ã€‚æ ¸å¿ƒç‰¹ç‚¹æ˜¯"æ¸è¿›å¼éªŒè¯"â€”â€”é€šè¿‡å¤šè½®æé—®æ¾„æ¸…éœ€æ±‚ï¼Œæå‡ºå¤šæ–¹æ¡ˆä¾›é€‰æ‹©ï¼Œåˆ†ç« èŠ‚å±•ç¤ºè®¾è®¡ï¼Œæ¯ç« éƒ½éœ€è¦ç”¨æˆ·ç¡®è®¤ã€‚è¿™ç§è®¾è®¡é¿å…äº†"æˆ‘ä»¥ä¸ºä½ ç†è§£é”™äº†"çš„é—®é¢˜ã€‚

### å…³é”®åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **One question at a time** | ä¸€æ¬¡åªé—®ä¸€ä¸ªé—®é¢˜ | ä¸è¿ç»­é—®"ç”¨MySQLè¿˜æ˜¯PostgreSQLï¼Ÿéœ€è¦è¯»å†™åˆ†ç¦»å—ï¼Ÿ"
| **Multiple choice preferred** | åå¥½é€‰æ‹©é¢˜ | "é€‰æ‹©æ•°æ®åº“ï¼šA) MySQL B) PostgreSQL C) MongoDB" |
| **YAGNI ruthlessly** | ä¸¥æ ¼éµå¾ª YAGNI | ä¸»åŠ¨å»ºè®®å»æ‰ç”¨æˆ·æœªæ˜ç¡®è¦æ±‚çš„åŠŸèƒ½ |
| **Explore alternatives** | æ¢ç´¢å¤šç§æ–¹æ¡ˆ | æ€»æ˜¯æä¾› 2-3 ç§æ–¹æ¡ˆï¼Œä¸åªæœ‰ä¸€ç§ |
| **Incremental validation** | å¢é‡éªŒè¯ | æ¯ç« èŠ‚éƒ½é—®"è¿™æ ·å¯¹å—ï¼Ÿ" |

### åæ¨¡å¼ï¼š"å¤ªç®€å•ä¸éœ€è¦è®¾è®¡"

```markdown
<HARD-GATE>
Do NOT invoke any implementation skill, write any code, scaffold any project, 
or take any implementation action until you have presented a design and 
the user has approved it. This applies to EVERY project regardless of 
perceived simplicity.
</HARD-GATE>

## Anti-Pattern: "This Is Too Simple To Need A Design"

Every project goes through this process. A todo list, a single-function utility, 
a config change â€” all of them. "Simple" projects are where unexamined assumptions 
cause the most wasted work.
```

### ä¸¾ä¾‹è¯´æ˜

**åœºæ™¯ï¼šå®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½**

> å¼€å‘è€…ï¼š"å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"
>
> âŒ **ä¸ä½¿ç”¨ brainstorming çš„ AI**ï¼š
> "å¥½çš„ï¼Œæˆ‘æ¥å®ç°ã€‚é¦–å…ˆå®‰è£… passport.js..."ï¼ˆç›´æ¥å¼€å§‹å†™ä»£ç ï¼‰
>
> âœ… **ä½¿ç”¨ brainstorming çš„ AI**ï¼š
> "è®©æˆ‘å…ˆäº†è§£éœ€æ±‚ã€‚æˆ‘çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ª Node.js + Express é¡¹ç›®ã€‚
> 
> é—®é¢˜1ï¼šéœ€è¦æ”¯æŒå“ªäº›ç™»å½•æ–¹å¼ï¼ŸA) ç”¨æˆ·åå¯†ç  B) ç¤¾äº¤ç™»å½• C) ä¸¤è€…éƒ½è¦
> å¼€å‘è€…ï¼šC) ä¸¤è€…éƒ½è¦
> 
> é—®é¢˜2ï¼šä¼šè¯ç®¡ç†ç­–ç•¥ï¼ŸA) JWT B) Session Cookie C) ä¸¤è€…éƒ½æ”¯æŒ
> å¼€å‘è€…ï¼šA) JWT
> 
> é—®é¢˜3ï¼šå¯†ç å­˜å‚¨æ–¹å¼ï¼ŸA) bcrypt B) Argon2 C) å…¶ä»–
> å¼€å‘è€…ï¼šA) bcrypt
> 
> åŸºäºæ‚¨çš„å›ç­”ï¼Œæˆ‘æå‡º 3 ç§æ–¹æ¡ˆï¼š
> - æ–¹æ¡ˆAï¼šç®€å•å®ç°ï¼Œæœ¬åœ°å­˜å‚¨ï¼ˆé€‚åˆåŸå‹ï¼‰
> - æ–¹æ¡ˆBï¼šä½¿ç”¨ Auth0 æœåŠ¡ï¼ˆå¿«é€Ÿä½†ä¾èµ–ç¬¬ä¸‰æ–¹ï¼‰
> - æ–¹æ¡ˆCï¼šè‡ªå»ºè®¤è¯ç³»ç»Ÿï¼ˆæ¨èï¼Œæ›´çµæ´»ï¼‰
> 
> æ¨èæ–¹æ¡ˆCï¼Œç†ç”±ï¼š...
> 
> [å¼€å‘è€…é€‰æ‹©æ–¹æ¡ˆC]
> 
> ç« èŠ‚1ï¼šæ¶æ„è®¾è®¡
> ä½¿ç”¨ Passport.js + JWTï¼ŒåŒ…å«...
> 
> è¿™æ ·å¯¹å—ï¼Ÿ
> [å¼€å‘è€…ï¼šå¯¹]
> 
> ç« èŠ‚2ï¼šæ•°æ®æ¨¡å‹
> User è¡¨åŒ…å« email, passwordHash...
> 
> è¿™æ ·å¯¹å—ï¼Ÿ
> [å¼€å‘è€…ï¼šå¯¹ï¼Œä½†åŠ  lastLogin å­—æ®µ]
> 
> [ä¿®è®¢å¹¶ç»§ç»­...]"

**ç»“æœå¯¹æ¯”**ï¼š
- ä¸ä½¿ç”¨ï¼šAI è‡ªå·±é€‰æ‹©äº† Session Cookieï¼Œä¸ç°æœ‰ JWT æ¶æ„å†²çªï¼Œè¿”å·¥ 2 å°æ—¶
- ä½¿ç”¨ï¼š5 åˆ†é’Ÿé—®ç­”ç¡®è®¤ï¼Œå®ç°å®Œå…¨ç¬¦åˆæ¶æ„ï¼Œä¸€æ¬¡é€šè¿‡

---

## åŠŸèƒ½äºŒï¼šwriting-plansï¼ˆç¼–å†™å®æ–½è®¡åˆ’ï¼‰

### åŠŸèƒ½æ¦‚è¿°

writing-plans å°†æ‰¹å‡†çš„è®¾è®¡æ–‡æ¡£è½¬åŒ–ä¸ºè¯¦ç»†çš„å®æ–½è®¡åˆ’ã€‚è®¡åˆ’æ‹†è§£ä¸ºç»†ç²’åº¦ä»»åŠ¡ï¼ˆ2-5åˆ†é’Ÿæ¯ä¸ªï¼‰ï¼ŒåŒ…å«å®Œæ•´æ–‡ä»¶è·¯å¾„ã€ä»£ç ç¤ºä¾‹ã€æµ‹è¯•å‘½ä»¤ã€éªŒè¯æ­¥éª¤ï¼Œè®©å®ç°è€…ï¼ˆå¯ä»¥æ˜¯ AI å­ä»£ç†æˆ–äººç±»ï¼‰æ— éœ€æ€è€ƒå¦‚ä½•æ‰§è¡Œï¼Œåªéœ€æŒ‰æ­¥éª¤æ“ä½œã€‚

### å·¥ä½œæµç¨‹

```mermaid
flowchart LR
    A[è¯»å– design.md] --> B[åˆ†æè®¾è®¡æ–‡æ¡£]
    B --> C[è¯†åˆ«ç»„ä»¶/æ¨¡å—]
    B --> D[ç¡®å®šä¾èµ–å…³ç³»]
    B --> E[ä¼°ç®—ä»»åŠ¡ç²’åº¦]
    
    C --> F[æ‹†è§£ä»»åŠ¡]
    D --> F
    E --> F
    
    F --> G[Task 1: è®¾ç½®åŸºç¡€]
    F --> H[Task 2: æ•°æ®æ¨¡å‹]
    F --> I[Task 3: APIå®ç°]
    F --> J[Task 4: å‰ç«¯é›†æˆ]
    F --> K[...æ›´å¤šä»»åŠ¡]
    
    G --> L[æ¯ä¸ªä»»åŠ¡åŒ…å«]
    H --> L
    I --> L
    J --> L
    K --> L
    
    L --> M[æ–‡ä»¶è·¯å¾„]
    L --> N[ä»£ç ç¤ºä¾‹]
    L --> O[æµ‹è¯•å‘½ä»¤]
    L --> P[éªŒè¯æ­¥éª¤]
    
    M --> Q[ç»„è£… plan.md]
    N --> Q
    O --> Q
    P --> Q
    
    Q --> R[ä¿å­˜è®¡åˆ’æ–‡æ¡£]
    R --> S[è§¦å‘ subagent-driven-dev]
    
    style Q fill:#c8e6c9
```

### ä»»åŠ¡ç²’åº¦æ ‡å‡†

```markdown
## Bite-Sized Task Granularity

**Each step is one action (2-5 minutes):**
- "Write the failing test" - step
- "Run it to make sure it fails" - step  
- "Implement the minimal code to make the test pass" - step
- "Run the tests and make sure they pass" - step
- "Commit" - step

**Bad (too big):**
- "Implement user authentication" (hours)
- "Add tests" (vague)

**Good (bite-sized):**
- "Create User model with email and password_hash fields"
- "Write test: user can register with valid email"
- "Run test to verify it fails"
- "Implement register() function"
- "Run test to verify it passes"
```

### è®¡åˆ’æ–‡æ¡£ç»“æ„

```markdown
# Feature Name Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement

**Goal:** One sentence describing what this builds

**Architecture:** 2-3 sentences about approach

**Tech Stack:** Key technologies/libraries

---

### Task 1: Component Name

**Files:**
- Create: `exact/path/to/file.py`
- Modify: `exact/path/to/existing.py:123-145`
- Test: `tests/exact/path/to/test.py`

**Step 1: Write the failing test**

```python
def test_specific_behavior():
    result = function(input)
    assert result == expected
```

**Step 2: Run test to verify it fails**

Run: `pytest tests/path/test.py::test_name -v`
Expected: FAIL with "function not defined"

**Step 3: Write minimal implementation**

```python
def function(input):
    return expected
```

**Step 4: Run test to verify it passes**

Run: `pytest tests/path/test.py::test_name -v`
Expected: PASS

**Step 5: Commit**

```bash
git add .
git commit -m "Add function for specific behavior"
```

---

[Task 2, 3, 4...]
```

### ä¸¾ä¾‹è¯´æ˜

**åœºæ™¯ï¼šå®ç°è´­ç‰©è½¦åŠŸèƒ½**

> **ä¸ä½¿ç”¨ writing-plans**ï¼š
> "å¥½çš„ï¼Œæˆ‘æ¥å®ç°è´­ç‰©è½¦ã€‚é¦–å…ˆåˆ›å»º Cart ç±»..."
> [2å°æ—¶å]
> "å®Œæˆäº†ï¼ŒåŒ…æ‹¬æ·»åŠ å•†å“ã€åˆ é™¤å•†å“ã€è®¡ç®—æ€»ä»·ã€åº”ç”¨ä¼˜æƒ åˆ¸ã€ä¿å­˜åˆ°æ•°æ®åº“..."
> é—®é¢˜ï¼šæ²¡æœ‰æµ‹è¯•ï¼Œä»£ç è‡ƒè‚¿ï¼Œä¸€æ¬¡æäº¤ 500 è¡Œ
>
> **ä½¿ç”¨ writing-plans**ï¼š
> "æˆ‘æ¥ä¸ºä½ åˆ¶å®šå®æ–½è®¡åˆ’ã€‚åŸºäºè®¾è®¡æ–‡æ¡£ï¼Œæ‹†è§£ä¸º 12 ä¸ªä»»åŠ¡ï¼š"
>
> Task 1: åˆ›å»º Cart æ¨¡å‹ï¼ˆ5åˆ†é’Ÿï¼‰
> - æ–‡ä»¶ï¼šmodels/cart.py
> - æ­¥éª¤ï¼šå†™æµ‹è¯•â†’è¿è¡Œå¤±è´¥â†’å®ç°â†’è¿è¡Œé€šè¿‡â†’æäº¤
>
> Task 2: å®ç°æ·»åŠ å•†å“ï¼ˆ5åˆ†é’Ÿï¼‰
> - æ–‡ä»¶ï¼šmodels/cart.py
> - æ­¥éª¤ï¼š...
>
> Task 3: å®ç°åˆ é™¤å•†å“ï¼ˆ5åˆ†é’Ÿï¼‰
> ...
>
> Task 12: é›†æˆä¼˜æƒ åˆ¸ï¼ˆ5åˆ†é’Ÿï¼‰
>
> æ€»ç”¨æ—¶ï¼š60åˆ†é’Ÿï¼Œ12ä¸ªæäº¤ï¼Œæ¯ä¸ªéƒ½æœ‰æµ‹è¯•

---

## åŠŸèƒ½ä¸‰ï¼šsubagent-driven-developmentï¼ˆå­ä»£ç†é©±åŠ¨å¼€å‘ï¼‰

### åŠŸèƒ½æ¦‚è¿°

subagent-driven-development æ˜¯ Superpowers çš„æ ¸å¿ƒæ‰§è¡Œå¼•æ“ã€‚å®ƒä¸ºæ¯ä¸ªä»»åŠ¡æ´¾é£æ–°é²œçš„å­ä»£ç†ï¼Œæ¯ä¸ªå­ä»£ç†æœ‰ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ã€‚ä»»åŠ¡å®Œæˆåï¼Œæ´¾é£ Spec å®¡æŸ¥å‘˜å’Œä»£ç è´¨é‡å®¡æŸ¥å‘˜è¿›è¡ŒåŒé˜¶æ®µå®¡æŸ¥ï¼Œç¡®ä¿å®ç°ç¬¦åˆè®¾è®¡ä¸”ä»£ç è´¨é‡è¾¾æ ‡ã€‚

### å·¥ä½œæµç¨‹

```mermaid
flowchart TB
    A[è¯»å– plan.md] --> B[æå–æ‰€æœ‰ä»»åŠ¡]
    B --> C[åˆ›å»º TodoWrite åˆ—è¡¨]
    C --> D{è¿˜æœ‰æœªå®Œæˆä»»åŠ¡?}
    
    D -->|æ˜¯| E[è·å–å½“å‰ä»»åŠ¡å…¨æ–‡]
    D -->|å¦| F[æ‰€æœ‰ä»»åŠ¡å®Œæˆ]
    
    E --> G[æ´¾é£å®ç°è€…å­ä»£ç†]
    
    G --> H{å­ä»£ç†æœ‰é—®é¢˜?}
    H -->|æ˜¯| I[å›ç­”é—®é¢˜]
    I --> G
    H -->|å¦| J[å­ä»£ç†å®ç°ä»»åŠ¡]
    
    J --> K[ç¼–å†™ä»£ç ]
    J --> L[ç¼–å†™æµ‹è¯•]
    J --> M[è¿è¡Œæµ‹è¯•]
    J --> N[è‡ªæˆ‘å®¡æŸ¥]
    J --> O[æäº¤ä»£ç ]
    
    K --> P[å®ç°è€…å®Œæˆ]
    L --> P
    M --> P
    N --> P
    O --> P
    
    P --> Q[æ´¾é£ Spec å®¡æŸ¥å‘˜]
    Q --> R[å¯¹æ¯”è®¾è®¡æ–‡æ¡£]
    R --> S{ç¬¦åˆè®¾è®¡?}
    
    S -->|å¦| T[è¿”å›å®ç°è€…ä¿®å¤]
    T --> Q
    S -->|æ˜¯| U[Spec å®¡æŸ¥é€šè¿‡]
    
    U --> V[æ´¾é£ä»£ç è´¨é‡å®¡æŸ¥å‘˜]
    V --> W[æ£€æŸ¥ä»£ç é£æ ¼]
    V --> X[æ£€æŸ¥æœ€ä½³å®è·µ]
    V --> Y[æ£€æŸ¥æµ‹è¯•è¦†ç›–]
    
    W --> Z{è´¨é‡é€šè¿‡?}
    X --> Z
    Y --> Z
    
    Z -->|å¦| AA[è¿”å›å®ç°è€…ä¿®å¤]
    AA --> V
    Z -->|æ˜¯| AB[ä»£ç è´¨é‡å®¡æŸ¥é€šè¿‡]
    
    AB --> AC[æ ‡è®°ä»»åŠ¡å®Œæˆ]
    AC --> D
    
    F --> AD[æ´¾é£æœ€ç»ˆå®¡æŸ¥å‘˜]
    AD --> AE[å®¡æŸ¥æ•´ä¸ªå®ç°]
    AE --> AF{æ•´ä½“é€šè¿‡?}
    AF -->|å¦| AG[ä¿®å¤é—®é¢˜]
    AG --> AD
    AF -->|æ˜¯| AH[è§¦å‘ finishing-a-branch]
    
    style U fill:#ccffcc
    style AB fill:#ccffcc
    style AH fill:#c8e6c9
```

### å­ä»£ç†ç±»å‹

| å­ä»£ç† | èŒè´£ | è§¦å‘æ—¶æœº | å®¡æŸ¥æ ‡å‡† |
|--------|------|---------|---------|
| **å®ç°è€…** | ç¼–å†™ä»£ç å’Œæµ‹è¯• | æ¯ä¸ªä»»åŠ¡å¼€å§‹ | è‡ªæˆ‘å®¡æŸ¥ |
| **Spec å®¡æŸ¥å‘˜** | éªŒè¯ç¬¦åˆè®¾è®¡ | å®ç°è€…å®Œæˆå | ç¬¦åˆè®¾è®¡æ–‡æ¡£ï¼Œæ— å¤šä½™åŠŸèƒ½ |
| **ä»£ç è´¨é‡å®¡æŸ¥å‘˜** | æ£€æŸ¥ä»£ç è´¨é‡ | Spec é€šè¿‡å | ä»£ç é£æ ¼ã€æœ€ä½³å®è·µã€æµ‹è¯•è¦†ç›– |
| **æœ€ç»ˆå®¡æŸ¥å‘˜** | æ•´ä½“è´¨é‡æŠŠå…³ | æ‰€æœ‰ä»»åŠ¡å®Œæˆå | æ•´ä½“æ¶æ„ã€é›†æˆæµ‹è¯• |

### å®¡æŸ¥æ ‡å‡†ç¤ºä¾‹

**Spec å®¡æŸ¥æ£€æŸ¥æ¸…å•**ï¼š
```markdown
## Spec Compliance Review

Check against design document:
- [ ] All required functionality implemented
- [ ] No functionality NOT in design (YAGNI check)
- [ ] Correct file locations
- [ ] Correct function signatures
- [ ] Correct data models
- [ ] Error handling as specified

Severity:
- ğŸ”´ Critical: Blocks functionality, must fix
- ğŸŸ¡ Important: Should fix, can proceed with note
- ğŸŸ¢ Minor: Style/nitpick, document for later
```

**ä»£ç è´¨é‡å®¡æŸ¥æ£€æŸ¥æ¸…å•**ï¼š
```markdown
## Code Quality Review

Strengths (what's good):
- Clean separation of concerns
- Good test coverage
- Clear variable names

Issues:
- ğŸ”´ Critical: Security vulnerability, data loss risk
- ğŸŸ¡ Important: Performance issue, maintainability
- ğŸŸ¢ Minor: Style, documentation

Recommendations:
- Consider extracting helper function
- Add docstring to public method
```

### ä¸¾ä¾‹è¯´æ˜

**åœºæ™¯ï¼šTask 5 - å®ç°ç”¨æˆ·æ³¨å†Œ API**

```
[ä¸»AI] æ´¾é£å®ç°è€…å­ä»£ç†

å®ç°è€…å­ä»£ç†ï¼š
"è®©æˆ‘å®ç°ç”¨æˆ·æ³¨å†Œ APIã€‚

å…ˆå†™æµ‹è¯•ï¼š
```python
def test_register_user():
    response = client.post('/api/register', json={
        'email': 'test@example.com',
        'password': 'password123'
    })
    assert response.status_code == 201
    assert response.json()['id'] is not None
```

è¿è¡Œæµ‹è¯•... å¤±è´¥ï¼ˆé¢„æœŸï¼šUser æ¨¡å‹ä¸å­˜åœ¨ï¼‰

å®ç° User æ¨¡å‹å’Œæ³¨å†Œç«¯ç‚¹ï¼š
```python
@app.post('/api/register')
def register(email: str, password: str):
    user = User.create(email=email, password=hash(password))
    return {'id': user.id}
```

è¿è¡Œæµ‹è¯•... é€šè¿‡ï¼

è‡ªæˆ‘å®¡æŸ¥ï¼š
- âœ… æµ‹è¯•è¦†ç›–æ­£å¸¸æµç¨‹
- âš ï¸ ç¼ºå°‘é‡å¤æ³¨å†Œçš„é”™è¯¯å¤„ç†ï¼ˆè®¾è®¡æ–‡æ¡£è¦æ±‚ï¼‰

æ·»åŠ é”™è¯¯å¤„ç†ï¼š
```python
if User.exists(email=email):
    raise HTTPException(400, 'Email already registered')
```

è¿è¡Œæµ‹è¯•... é€šè¿‡ï¼
æäº¤ä»£ç ï¼šgit commit -m "Add user registration API"

[è¿”å›ä¸»AIï¼šTask 5 å®Œæˆ]"

---

[ä¸»AI] æ´¾é£ Spec å®¡æŸ¥å‘˜

Spec å®¡æŸ¥å‘˜ï¼š
"å¯¹æ¯”è®¾è®¡æ–‡æ¡£ï¼š

âœ… ç¬¦åˆè®¾è®¡ï¼š
- POST /api/register ç«¯ç‚¹æ­£ç¡®
- è¿”å›ç”¨æˆ· ID
- æ£€æŸ¥é‡å¤é‚®ç®±

ğŸ”´ ä¸¥é‡é—®é¢˜ï¼š
- è®¾è®¡æ–‡æ¡£è¦æ±‚å¯†ç å¼ºåº¦æ£€æŸ¥ï¼ˆ8ä½+å¤§å°å†™+æ•°å­—ï¼‰ï¼Œæœªå®ç°

è¯·ä¿®å¤ã€‚"

---

[ä¸»AI] è¿”å›å®ç°è€…ä¿®å¤

å®ç°è€…å­ä»£ç†ï¼š
"æ·»åŠ å¯†ç å¼ºåº¦æ£€æŸ¥ï¼š
```python
if len(password) < 8 or not re.search('[A-Z]', password):
    raise HTTPException(400, 'Password too weak')
```

æ·»åŠ æµ‹è¯•... é€šè¿‡ï¼
é‡æ–°æäº¤ã€‚"

---

[ä¸»AI] é‡æ–°æ´¾é£ Spec å®¡æŸ¥å‘˜

Spec å®¡æŸ¥å‘˜ï¼š
"âœ… ç°åœ¨å®Œå…¨ç¬¦åˆè®¾è®¡ã€‚"

---

[ä¸»AI] æ´¾é£ä»£ç è´¨é‡å®¡æŸ¥å‘˜

ä»£ç è´¨é‡å®¡æŸ¥å‘˜ï¼š
"å®¡æŸ¥æŠ¥å‘Šï¼š

ä¼˜ç‚¹ï¼š
- æ¸…æ™°çš„é”™è¯¯å¤„ç†
- æµ‹è¯•è¦†ç›–æ­£å¸¸å’Œé”™è¯¯åœºæ™¯
- RESTful API è®¾è®¡

ğŸŸ¡ å»ºè®®æ”¹è¿›ï¼š
- å¯†ç å“ˆå¸Œä½¿ç”¨ bcrypt è€Œéè‡ªå®šä¹‰
- æ·»åŠ è¾“å…¥éªŒè¯ï¼ˆemail æ ¼å¼ï¼‰

ä¸é˜»ç¢ï¼Œä½†å»ºè®®åç»­ä¼˜åŒ–ã€‚"

---

[ä¸»AI] æ ‡è®° Task 5 å®Œæˆ âœ“
```

---

## åŠŸèƒ½å››ï¼štest-driven-developmentï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰

### åŠŸèƒ½æ¦‚è¿°

TDD æŠ€èƒ½å¼ºåˆ¶å®æ–½çº¢-ç»¿-é‡æ„å¾ªç¯ï¼šå…ˆå†™æµ‹è¯•ï¼ˆçº¢ï¼‰ï¼Œå†™æœ€å°‘ä»£ç é€šè¿‡æµ‹è¯•ï¼ˆç»¿ï¼‰ï¼Œç„¶åé‡æ„ã€‚å¦‚æœå†™äº†ä»£ç ä½†æ²¡å†™æµ‹è¯•ï¼Œå¿…é¡»åˆ é™¤ä»£ç é‡æ–°å¼€å§‹ã€‚è¿™æ˜¯ Superpowers çš„é“å¾‹ã€‚

### å·¥ä½œæµç¨‹

```mermaid
flowchart LR
    A[å¼€å§‹æ–°åŠŸèƒ½] --> B[RED: å†™å¤±è´¥æµ‹è¯•]
    B --> C[è¿è¡Œæµ‹è¯•]
    C --> D{æµ‹è¯•å¤±è´¥?}
    D -->|æ˜¯| E[GREEN: å†™æœ€å°‘ä»£ç ]
    D -->|å¦| F[æµ‹è¯•æœ‰é—®é¢˜ï¼Œä¿®å¤]
    F --> B
    
    E --> G[è¿è¡Œæµ‹è¯•]
    G --> H{æµ‹è¯•é€šè¿‡?}
    H -->|æ˜¯| I[REFACTOR: é‡æ„ä»£ç ]
    H -->|å¦| J[ä¿®å¤å®ç°]
    J --> G
    
    I --> K[è¿è¡Œæ‰€æœ‰æµ‹è¯•]
    K --> L{å…¨éƒ¨é€šè¿‡?}
    L -->|æ˜¯| M[æäº¤ä»£ç ]
    L -->|å¦| N[é‡æ„å¼•å…¥ Bugï¼Œå›æ»š]
    N --> I
    
    M --> O{è¿˜æœ‰åŠŸèƒ½?}
    O -->|æ˜¯| A
    O -->|å¦| P[å®Œæˆ]
    
    style B fill:#ffcccc
    style E fill:#ccffcc
    style I fill:#ccccff
    style M fill:#c8e6c9
```

### é“å¾‹

```markdown
## The Iron Law

```
NO PRODUCTION CODE WITHOUT A FAILING TEST FIRST
```

Write code before the test? Delete it. Start over.

**No exceptions:**
- Don't keep it as "reference"
- Don't "adapt" it while writing tests
- Don't look at it
- Delete means delete

Implement fresh from tests. Period.
```

### ä¸¾ä¾‹è¯´æ˜

**åœºæ™¯ï¼šå®ç°è®¡ç®—æŠ˜æ‰£åŠŸèƒ½**

> âŒ **è¿å TDD**ï¼š
> å¼€å‘è€…å…ˆå†™äº†å®ç°ï¼š
> ```python
> def calculate_discount(price, coupon):
>     if coupon == 'SAVE20':
>         return price * 0.8
>     elif coupon == 'HALF':
>         return price * 0.5
>     return price
> ```
> 
> ç„¶åè¡¥æµ‹è¯•ï¼š
> ```python
> def test_calculate_discount():
>     assert calculate_discount(100, 'SAVE20') == 80
>     assert calculate_discount(100, 'HALF') == 50
> ```
> 
> é—®é¢˜ï¼šæµ‹è¯•åªè¦†ç›–äº†å·²å®ç°çš„åˆ†æ”¯ï¼Œé—æ¼äº†è¾¹ç•Œæƒ…å†µã€‚
>
> âœ… **éµå¾ª TDD**ï¼š
> 1. **RED** - å†™æµ‹è¯•ï¼ˆè€ƒè™‘æ‰€æœ‰åœºæ™¯ï¼‰ï¼š
> ```python
> def test_valid_coupon_save20():
>     assert calculate_discount(100, 'SAVE20') == 80
>
> def test_valid_coupon_half():
>     assert calculate_discount(100, 'HALF') == 50
>
> def test_invalid_coupon():
>     assert calculate_discount(100, 'INVALID') == 100
>
> def test_expired_coupon():
>     assert calculate_discount(100, 'EXPIRED') == 100
> ```
> è¿è¡Œæµ‹è¯•... å…¨éƒ¨å¤±è´¥ï¼ˆå‡½æ•°æœªå®šä¹‰ï¼‰âœ…
> 
> 2. **GREEN** - å†™æœ€å°‘ä»£ç ï¼š
> ```python
> def calculate_discount(price, coupon):
>     if coupon == 'SAVE20':
>         return price * 0.8
>     elif coupon == 'HALF':
>         return price * 0.5
>     return price
> ```
> è¿è¡Œæµ‹è¯•... é€šè¿‡ âœ…
> 
> 3. **REFACTOR** - é‡æ„ï¼š
> ```python
> COUPONS = {
>     'SAVE20': 0.8,
>     'HALF': 0.5
> }
>
> def calculate_discount(price, coupon):
>     return price * COUPONS.get(coupon, 1.0)
> ```
> è¿è¡Œæµ‹è¯•... ä»ç„¶é€šè¿‡ âœ…
> æäº¤ï¼

**ç»“æœå¯¹æ¯”**ï¼š
- è¿å TDDï¼šé—æ¼äº† invalid coupon çš„å¤„ç†ï¼Œä¸Šçº¿åç”¨æˆ·æŠ•è¯‰
- éµå¾ª TDDï¼šæ‰€æœ‰åœºæ™¯éƒ½æœ‰æµ‹è¯•è¦†ç›–ï¼Œé‡æ„æ—¶å®‰å…¨ï¼Œä»£ç è´¨é‡é«˜
